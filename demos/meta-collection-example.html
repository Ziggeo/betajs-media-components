<html lang="en">
<head>
    <title>My Page title</title>
    <meta name="description" content="Meta Description: Praeterea iter est quasdam res quas ex communi.">
    <meta name="keywords" content="Meta Keywords: Tu, quoque, Brute, fili, mi, nihil, timor, populi, nihil!">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    <script src="/static/node_modules/betajs-shims/dist/betajs-shims.js"></script>
    <script src="/static/node_modules/betajs-scoped/dist/scoped.js"></script>
    <script src="/static/node_modules/betajs/dist/beta-noscoped.js"></script>
    <script src="/static/node_modules/betajs-browser/dist/betajs-browser-noscoped.js"></script>
    <script src="/static/node_modules/betajs-media/dist/betajs-media-noscoped.js"></script>
    <script src="/static/node_modules/betajs-dynamics/dist/betajs-dynamics-noscoped.js"></script>
    <script src="/static/dist/betajs-media-components-noscoped.js"></script>
    <link  href="/static/dist/betajs-media-components.css" rel="stylesheet" />

    <script src="/static/dist/themes/modern/script.js"></script>
    <link  href="/static/dist/themes/modern/style.css" rel="stylesheet" />

</head>
<body>

<div class="container">
    <div class="row">
<!--        <div class="col-xs-12 jumbotron">-->
<!--            <code id="logger"></code>-->
<!--        </div>-->
    </div>
</div>

<hr />

<div class="clearfix"></div>

<div class="container-fluid">
    <main>
        <h1>MAIN H1: Me non paenitet nullum festiviorem excogitasse ad hoc. </h1>
    </main>
    <div>
        <h5>h5: Idque Caesaris facere voluntate liceret: sese habere.</h5>
            <a href="#">
                <div>
                    <h5>SHOULD NOT INCLUDE!!!!</h5>
                </div>
            </a>
       <p>
           Quo usque tandem abutere, Catilina, patientia nostra? Quam diu etiam furor iste tuus nos eludet? Magna pars studiorum, prodita quaerimus. Vivamus sagittis lacus vel augue laoreet rutrum faucibus. Ullamco laboris nisi ut aliquid ex ea commodi consequat.
       </p>
        <p>
            Ab illo tempore, ab est sed immemorabili. Lorem ipsum dolor sit amet, consectetur adipisici elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Quisque placerat facilisis egestas cillum dolore.
        </p>
        <p>
            WITH IMAGE: Lorem ipsum dolor sit amet <img src="/static/demos/assets/sample-cover.png" class="img" />  consectetur adipisici elit.
        </p>

        <blockquote>
            Vivamus sagittis lacus vel augue laoreet rutrum faucibus. Petierunt uti sibi concilium totius Galliae in diem certam indicere.
        </blockquote>
    </div>

    <article>
        <p>Article > p: Gallia est omnis divisa in partes tres, quarum. Plura mihi bona sunt, inclinet, amari petere vellent.</p>
        <p>Article > p: Mercedem aut nummos unde unde extricat, amaras.</p>
        <p>Article > p: Ut enim ad minim veniam, quis nostrud exercitation. Excepteur sint obcaecat cupiditat non proident culpa. Quisque ut dolor gravida, placerat libero vel, euismod.</p>
    </article>

    <main>
        <div>
            <p>Main > div > p: Gallia est omnis divisa in partes tres, quarum. Plura mihi bona sunt, inclinet, amari petere vellent.</p>
            <p>Main > div > p: Mercedem aut nummos unde unde extricat, amaras.</p>
            <p>AMain > div > p: Ut enim ad minim veniam, quis nostrud exercitation. Excepteur sint obcaecat cupiditat non proident culpa. Quisque ut dolor gravida, placerat libero vel, euismod.</p>
        </div>
    </main>

    <main>
        <p>Main > p: Gallia est omnis divisa in partes tres, quarum. Plura mihi bona sunt, inclinet, amari petere vellent.</p>
        <p>Main > p: Mercedem aut nummos unde unde extricat, amaras.</p>
        <p>AMain > p: Ut enim ad minim veniam, quis nostrud exercitation. Excepteur sint obcaecat cupiditat non proident culpa. Quisque ut dolor gravida, placerat libero vel, euismod.</p>
    </main>



    <div>
        <div id="player"></div>
    </div>

    <article>
        <p>Article > p After player: Gallia est omnis divisa in partes tres, quarum. Plura mihi bona sunt, inclinet, amari petere vellent.</p>
        <p>Article > p Mercedem aut nummos unde unde extricat, amaras.</p>
        <p>Article > p Ut enim ad minim veniam, quis nostrud exercitation. Excepteur sint obcaecat cupiditat non proident culpa. Quisque ut dolor gravida, placerat libero vel, euismod.</p>
    </article>

    <div>
        <p>
            After player: Quo usque tandem abutere, Catilina, patientia nostra? Quam diu etiam furor iste tuus nos eludet? Magna pars studiorum, prodita quaerimus. Vivamus sagittis lacus vel augue laoreet rutrum faucibus. Ullamco laboris nisi ut aliquid ex ea commodi consequat.
        </p>
        <p>
            Ab illo tempore, ab est sed immemorabili. Lorem ipsum dolor sit amet, consectetur adipisici elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Quisque placerat facilisis egestas cillum dolore.
        </p>
        <blockquote>
            After player:  Vivamus sagittis lacus vel augue laoreet rutrum faucibus.
        </blockquote>
    </div>

    <div id="related-posts" class="row">
        <h2 class="page-header col-sm-12 text-center mb-3 mt-5">Advertisement or related posts</h2>
        <article class="col-xs-12 col-sm-4">
            <a href="#">
                <h5>NO! Related Content Header 5</h5>
                <p>NO! Quid securi etiam tamquam eu fugiat nulla pariatur. i
                    Fabio vel iudice vincam, sunt in culpa qui officia.
                    Tu quoque, Brute, fili mi, nihil timor populi, nihil! Contra legem facit qui id facit quod lex prohibet. Quisque placerat facilisis egestas cillum dolore.
                </p>
            </a>
        </article>

        <div class="col-xs-12 col-sm-4">
            <a href="#">
                <h6>NO! Related Header 6: Contra legem facit qui id facit quod lex prohibet.</h6>
                <p>NO! Unam incolunt Belgae, aliam Aquitani, tertiam. Quisque ut dolor gravida, placerat libero vel, euismod.</p>
            </a>
        </div>

        <div class="col-xs-12 col-sm-4">
            <a href="#">
                <div>
                    <h4>NO! Related Header 4: Quisque ut dolor gravida, placerat libero vel, euismod.</h4>
                    <div>
                        <p>NO! Quid securi etiam tamquam eu fugiat nulla pariatur. Sed haec quis possit intrepidus aestimare tellus.</p>
                    </div>
                </div>
            </a>
        </div>
    </div>


</div>

<script>

    const logger = document.getElementById('logger');

    // if (typeof document !== "undefined" && logger) {
    //     var data = {};
    //     data.URL = document.URL;
    //     data.title = document.title;
    //
    //     /** Array with object:
    //      {
    //         key: string, scope: Node, resultKeyType: 'content' || 'innerText',
    //         dataKeyType: 'key' | 'tag' | string: 'anyAttributeName',
    //         rules: string[] | string
    //         // xPath rules: https://devhints.io/xpath
    //      }
    //      */
    //     rules = [
    //         {
    //             key: 'meta',
    //             scope: document.head,
    //             dataKeyType: 'name', // key - this object key, tag - should be key as a tag name, anyAttributeName - if not defined will use key
    //             resultKeyType: 'content', // content, innerText
    //             rules: "//meta[@name='keywords' or @name='description']" // string or array of rules
    //         },
    //         {
    //             key: 'header',
    //             scope: document.body,
    //             dataKeyType: 'key',
    //             resultKeyType: 'innerText',
    //             rules: "//h1[position()=1]"
    //         },
    //         {
    //             key: 'content',
    //             scope: document.body,
    //             dataKeyType: 'key',
    //             resultKeyType: 'innerText',
    //             rules: [
    //                 "//p[parent::div or parent::main or parent::article][parent::*[not(parent::a)]][parent::*[parent::*[not(parent::a)]]]",
    //                 "//h2[parent::div or parent::main or parent::article or parent::body][parent::*[not(parent::a)]][parent::*[parent::*[not(parent::a)]]]",
    //                 "//h3[parent::div or parent::main or parent::article or parent::body][parent::*[not(parent::a)]][parent::*[parent::*[not(parent::a)]]]",
    //                 "//h4[parent::div or parent::main or parent::article or parent::body][parent::*[not(parent::a)]][parent::*[parent::*[not(parent::a)]]]",
    //                 "//h5[parent::div or parent::main or parent::article or parent::body][parent::*[not(parent::a)]][parent::*[parent::*[not(parent::a)]]]",
    //                 "//h6[parent::div or parent::main or parent::article or parent::body][parent::*[not(parent::a)]][parent::*[parent::*[not(parent::a)]]]",
    //             ]
    //         }
    //     ];
    //
    //     const Objs = BetaJS.Objs;
    //     const Types = BetaJS.Types;
    //
    //     /**
    //      *
    //      * @param query
    //      * @param resultRule
    //      * @param result
    //      * @returns {*}
    //      */
    //     function xPathSelection (query, resultRule, result) {
    //         var selected, queries, key, scope, outputKey, resultKeyType;
    //         result = Types.is_object(result) ? result : {};
    //         key = resultRule.key; scope = resultRule.scope || document; outputKey = key;
    //         resultKeyType = Types.is_undefined(resultRule.resultKeyType) ? 'innerText' : resultRule.resultKeyType
    //         queries = document.evaluate(query, scope, null, XPathResult.ANY_TYPE, null);
    //
    //         while (selected = queries.iterateNext()) {
    //             if (typeof resultRule.dataKeyType !== "undefined" && resultRule.dataKeyType) {
    //                 if (resultRule.dataKeyType === 'tag') {
    //                     outputKey = selected.nodeName;
    //                 } else {
    //                     if (resultRule.dataKeyType !== 'key' && typeof selected.getAttribute('name') !== 'undefined') {
    //                         outputKey = selected.getAttribute('name');
    //                     }
    //                 }
    //             }
    //
    //             if (Types.is_undefined(result[outputKey])) result[outputKey] = ""; else result[outputKey] += " ";
    //
    //             result[outputKey] += selected[resultKeyType];
    //         }
    //
    //         return result;
    //     }
    //
    //
    //     Objs.iter(rules, function (rule, index) {
    //         if (Types.is_undefined(rule.key) || Types.is_undefined(rule.rules) ||
    //             (Types.is_defined(rule.key) && (!Types.is_string(rule.key) || !rule.key))
    //             || (Types.is_defined(rule.rule) && !(Types.is_string(rule.rules) || Types.is_array(rule.rules)))
    //         ) {
    //             return;
    //         }
    //
    //         if (Types.is_array(rule.rules)) {
    //             Objs.iter(rule.rules, function (_r) {
    //                 xPathSelection(_r, rule, data);
    //             });
    //         } else {
    //             xPathSelection(rule.rules, rule, data);
    //         }
    //
    //         if (index === Objs.count(rules) - 1) {
    //             console.log("-- >", index, Objs.count(rules));
    //             // submit
    //         }
    //     });
    //
    //     // var metas = document.evaluate(
    //     //     "//meta[@name='keywords' or @name='description']", document.head, null,
    //     //     XPathResult.ANY_TYPE, null
    //     // );
    //     //
    //     // var headers = document.evaluate(
    //     //     // //h1[position()=1] || //h5[not(parent::a)] | //h5[parent::*[not(parent::a)]][parent::*[parent::*[not(parent::a)]]]
    //     //     "//h1[position()=1]", document.body, null, XPathResult.ANY_TYPE, null
    //     // );
    //     //
    //     // var content = document.evaluate(
    //     //     "//p[parent::div or parent::main or parent::article][parent::*[not(parent::a)]][parent::*[parent::*[not(parent::a)]]]", document.body, null, XPathResult.ANY_TYPE, null
    //     // );
    //     //
    //     // var meta, node, header;
    //     // while (meta = metas.iterateNext()) {
    //     //     data[meta.getAttribute('name')] = meta.content;
    //     // }
    //     //
    //     // while (header = headers.iterateNext()) {
    //     //     data[header.nodeName] = header.content;
    //     // }
    //     //
    //     // while (node = content.iterateNext()) {
    //     //     data['content'] += " " + node.innerText;
    //     // }
    //
    //     // iterator = document.evaluate(
    //     //     '//div', document.body, null, XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null
    //     // );
    //
    //     // logger.innerText = JSON.stringify(data);
    //
    // }

    var player = new BetaJS.MediaComponents.VideoPlayer.Dynamics.Player({
        element: document.getElementById('player'),
        attrs: {
            height: 320,
            width: '640px',
            "collect-meta-data": true,
            "send-meta-endpoint": "https://localhost:5050/api/json",
            // "collection-xpath-rule": {},
            source: '/static/demos/sample-video.mp4',
            poster: '/static/demos/assets/sample-cover.png',
        }
    });

    // console.log('Player >> ', player);

    player.on("attached", function (playerInstance) {
        // this.addSettingsMenuItem({set: 'Somen'});
        // playerInstance.add_setting({setting: 'someID'});
        // console.log("Tags >  ", player.get("tracktags"));
        // console.log('00 >> ', playerInstance, player.player._element)
        let toggleButton = document.getElementById('toggleTracks');
        if (toggleButton)
            toggleButton.onclick = function() {
                player.toggle_tracks();
            };

        playerInstance.on("fullscreen-change", function (isFullscreen) {
            // console.log('is Full', isFullscreen);
        }, this);

    }, player);

    player.on("ready_to_play", (ev) => {
        // console.log('Portrait after ?? ', player.isPortrait(), player.isLandscape());
    }, player);

    player.on("ended", function () {
        // console.log('ENDED');
    }, player);

    player.activate();
    // BetaJS.Dynamics.Dynamic.activate();
</script>

</body>
</html>
