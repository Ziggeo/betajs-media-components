<!DOCTYPE html>
<html lang="en">
<head>
<!--    <script type="text/javascript" src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>-->

    <script src="../../vendors/jquery.min.js"></script>
    <script src="../../node_modules/betajs-shims/dist/betajs-shims.js"></script>
    <script src="../../node_modules/betajs-scoped/dist/scoped.js"></script>
    <script src="../../node_modules/betajs/dist/beta-noscoped.js"></script>
    <script src="../../node_modules/betajs-browser/dist/betajs-browser-noscoped.js"></script>
    <script src="../../node_modules/betajs-media/dist/betajs-media-noscoped.js"></script>
    <script src="../../node_modules/betajs-dynamics/dist/betajs-dynamics-noscoped.js"></script>
    <script src="../../dist/betajs-media-components-noscoped.js"></script>
    <link  href="../../dist/betajs-media-components.css" rel="stylesheet" />
    <script src="../../dist/themes/modern/script.js"></script>
    <link  href="../../dist/themes/modern/style.css" rel="stylesheet" />
</head>
<body style="background: #EEE">
    <script>

        var gnrok; // = 'https://613d-213-172-83-96.in.ngrok.io/';
        var errroAd = '//localhost:5050/static/demos/vast-samples/---error-url---';
        var v3_clickThroughtLocalAd = '//localhost:5050/static/demos/vast-samples/VAST_3_0/Video_Clicks_and_click_tracking-Inline-test.xml';
        var v3_skipable = '//localhost:5050/static/demos/vast-samples/ads-linear-skipable.xml';
        var v3_doubleclick = 'https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dskippablelinear&correlator=';
        // var v3_doubleclickVMAP = 'https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dskippablelinear&correlator=&ad_rule=1';
        var v3_doubleclickbased = '//localhost:5050/static/demos/vast-samples/based-doubleclick.xml';
        var v4_2_wrapper = '//localhost:5050/static/demos/vast-samples/VAST_4_2/Wrapper_Tag-test.xml';
        // var v4_2_non_linear = '//localhost:5050/static/demos/vast-samples/VAST_4_2/Inline_Non-Linear_Tag-test.xml';
        var v3_non_linear = '//localhost:5050/static/demos/vast-samples/VAST_3_0/Inline_Non-Linear_Tag-test.xml';
        var v4_2_skipable = (gnrok || '//localhost:5050/') + 'static/demos/vast-samples/VAST_4_2/Inline_Skipable.xml';
        var v4_2_non_skipable = '//localhost:5050/static/demos/vast-samples/VAST_4_2/Inline_NON_Skipable.xml';

        // VMAP - Pre-roll Single Ad, Mid-roll Optimized Pod with 3 Ads, Post-roll Single Ad
        // var vmap = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/vmap_ad_samples&sz=640x480&cust_params=sample_ar%3Dpremidpostoptimizedpod&ciu_szs=300x250&gdfp_req=1&ad_rule=1&output=vmap&unviewed_position_start=1&env=vp&impl=s&cmsid=496&vid=short_onecue&correlator='
        var vmap = '//localhost:5050/static/demos/vast-samples/VMAP/dc_vmap_pre_1_mid_3_post_1.xml'

        // var nonLinear = 'https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/nonlinear_ad_samples&sz=480x70&cust_params=sample_ct%3Dnonlinear&ciu_szs=300x250%2C728x90&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator=';
        var nonLinear = '//localhost:5050/static/demos/vast-samples/dc-single_non-linear.xml';

        var adsense = new BetaJS.MediaComponents.Ads.IMAProvider({
            // adTagUrl: 'https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dskippablelinear&correlator='
            // adTagUrl: 'https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dlinear&correlator='
            // adTagUrl: 'https://securepubads.g.doubleclick.net/gampad/ads?env=vp&gdfp_req=1&output=vast&iu=/1234/video-demo&sz=400x300&unviewed_position_start=1&ciu_szs=728x90,300x250'
            // adTagUrl: 'https://localhost:5050/static/demos/vast-samples/VAST_3_0/Inline_Linear_Tag-test.xml'
            // adTagUrl: errroAd
            // adTagUrl: v3_clickThroughtLocalAd
            // adTagUrl: v3_doubleclickbased
            // adTagUrl: v3_skipable
            // adTagUrl: v4_2_wrapper
            // adTagUrl: v3_doubleclickVMAP
            adTagUrl: v4_2_skipable
            // adTagUrl: v4_2_non_skipable
            // adTagUrl: vmap
            // adTagUrl: nonLinear
            , nonLinearAdTagUrl: v3_non_linear

            // preAdTagUrl: 'https://localhost:5050/static/demos/vast-samples/VAST_3_0/Video_Clicks_and_click_tracking-Inline-test.xml',
            // postAdTagUrl: 'https://localhost:5050/static/demos/vast-samples/VAST_3_0/Video_Clicks_and_click_tracking-Inline-test.xml',
            // midAdTagUrl: 'https://localhost:5050/static/demos/vast-samples/VAST_3_0/Video_Clicks_and_click_tracking-Inline-test.xml',
            // adMidTagUrls: [
            //     'https://localhost:5050/static/demos/vast-samples/VAST_3_0/Video_Clicks_and_click_tracking-Inline-test.xml',
            //     'https://localhost:5050/static/demos/vast-samples/VAST_3_0/Video_Clicks_and_click_tracking-Inline-test.xml'
            // ]
            //, vpaidMode: true, DISABLED, ENABLED, INSECURE
            // , maxAllowedRedirects: 10,
            // https://developers.google.com/interactive-media-ads/docs/sdks/html5/client-side/localization
            , locale: 'fr'
            , customSkipView: true
            // , skipAfter: 3
            , nonLinearDuration: 10 // default will be 10 seconds
        });
        adsense.register("ima");
    </script>


    <div style="position: relative">
        <div id="player"></div>
    </div>

<!--    ba-skipinitial-->
<!--    ba-autoplay-->
<!--    custom-non-linear-->
<!--    <ba-videoplayer></ba-videoplayer>-->
<!--    ba-non-linear="52[,250], 40%[300], 13[300,250], 2[480,70]"-->
    <!-- 40% == 24sec   -->
<!-- 45% == 27sec   -->
<!--    ba-non-linear="40[,90], 50%, 20[720,90], 45[250]"-->
    <!--    ba-non-linear="40, 50%[720,90], 20[,90], 45[250]", based on player dimension it could be 720x90 or 300x50 -->
    <!-- If will not set ba-non-linear dimensions it will be based on video player dimenstions
    , also if will be set only one side dimension it will be not look for exact match advertisement, but only partial
    -->
    <!--  mid,post  -->
    <!--  ba-linear="pre,mid[14, 45%,39], post" -->
    <!--  ba-non-linear="40, 50%[720,90], 20[,90], 45[250]"-->

    <script>
        var player = new BetaJS.MediaComponents.VideoPlayer.Dynamics.Player({
            element: document.getElementById('player'),
            attrs: {
                theme: "modern",
                poster: "/static/demos/assets/sample-cover.png"
                // , source: "/static/demos/assets/portrait.mp4"
                , source: "https://betajs.com/sample.mp4"
                // source: "/static/demos/assets/landscape.mp4",
                // 'ba-playlist': [
                //     {poster: 'sample-cover2.png', source: 'sample-video2.mp4'},
                //     {poster: 'sample-cover.png', source: 'sample-video.mp4'},
                //     {poster: 'sample-cover.png', source: 'sample-video3.mp4'}
                // ],
                , adprovider: "ima"
                // showduration: true,
                // ,linear: "pre, mid[6*], post"
                // ,linear: "post"
                , linear: "pre"
                // , linear: "mid[5*]"
                , minadintervals: 8
                // , 'non-linear': "52[,250], 55%[300], 19[,250], 2[480,70]"
                // , preload: true
                , autoplay: true
            }
        });

        player.on("adloaded", () => { console.log("ad loaded")});
        player.on("adcontentPauseRequested", () => { console.log("ad contentPauseRequested")});
        player.on("contentResumeRequested", () => { console.log("ad contentResumeRequested")});
        player.on("start", () => { console.log("ad start")});
        player.on("firstQuartile", () => { console.log("ad firstQuartile")});
        player.on("midpoint", () => { console.log("ad midpoint")});
        player.on("thirdQuartile", () => { console.log("ad thirdQuartile")});
        player.on("complete", () => { console.log("ad complete")});
        player.on("allAdsCompleted", () => { console.log("ad allAdsCompleted")});
        player.on("pause", () => { console.log("ad pause")});
        player.on("userClose", () => { console.log("ad userClose")});

        player.on("attached", function (playerInstance) {
            // this.addSettingsMenuItem({set: 'Somen'});
            // playerInstance.add_setting({setting: 'someID'});
            // console.log("Tags >  ", player.get("tracktags"));
            // console.log('00 >> ', playerInstance, player.player._element)
        }, player);

        player.on("ready_to_play", (ev) => {
            // console.log('Portrait after ?? ', player.isPortrait(), player.isLandscape());
        }, player);

        player.on("ended", function () {
            // console.log('ENDED');
        }, player);
        //
        // setInterval(() => {
        //     player.set("duration", new Date());
        // }, 3000);

        player.activate();

    </script>
</body>
</html>
